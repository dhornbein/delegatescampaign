{% extends '../layouts/html.html' %}

{% block contents %}

{% set clinton = 0 %}
{% set bernie = 0 %}
{% set total = 0 %}
{% for row, val in gSheets["Delegates"].rows %}
  {% if val.state == abbr or val.state == title %}
    {% set total += 1 %}
    {% if val.candidate|lower == "clinton" %}
      {% set clinton += 1 %}
    {% endif %}
    {% if val.candidate|lower == "bernie" %}
      {% set bernie += 1 %}
    {% endif %}
  {% endif %}
{% endfor %}
{% set uncommitted = total - clinton - bernie %}

  <article>
    <section class="row text-center padded">
      <p class="lead">Superdelegates in</p>
      <h1>{{title|safe}}</h1>
    </section>

    <section class="row padded bk-red">
      <h1 class="text-center"><span class="font-serif">{{ total }}</span> Superdelegates</h1>
      <h3 class="text-center"><span class="font-serif">{{ bernie }}</span> Sanders - <span class="font-serif">{{ clinton }}</span> Clinton - <span class="font-serif">{{ uncommitted }}</span> Uncommitted</h3>
      <p class="lead text-center">Tell these {{ uncommitted + clinton }} to vote for Bernie!</p>
      <p class="text-center">
        <a href="#delegate" class="btn btn-warning btn-lg">Sign Here!</a>
      </p>
    </section>

    <section class="row delegates-list padded bk-blue">
      <h2 class="text-center">Delegates for {{title|safe}}</h2>
        {% for row, val in gSheets["Delegates"].rows %}
          {% if val.state == abbr or val.state == title and val.candidate|lower != "bernie" %}
          <div class="delegate bk-white col-xs-10 col-xs-offset-1 endorse-{{val.candidate|lower|default('uncommitted')}}">
            <div class="row ">
              <div class="title">{{val.candidate|safe|default('Uncommitted')}}</div>
            </div>
            <div class="row">
              <div class="col-xs-6 text-right">
                <p><strong class="lead">{{val.name|safe}}</strong><br>{{val.title|safe}}</p>
              </div>
              <div class="col-xs-6 del-social">
                {% if val.facebook %}
                <a href="{{val.facebook}}">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                  </span></a>
                {% endif %}
                {% if val.twitter %}
                <a href="{{val.twitter}}">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                  </span></a>
                {% endif %}
                {% if val.youtube %}
                <a href="{{val.youtube}}">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-youtube fa-stack-1x fa-inverse"></i>
                  </span></a>
                {% endif %}
              </div>
            </div>

            <div class="row del-contact">
              <div class="col-xs-6 text-right">
                <p>
                  {% if val.phone %}
                    Phone: {{val.phone|safe}}
                  <br>
                  {% endif %}
                  {% if val.fax %}
                    Fax: {{val.fax|safe}}
                  {% endif %}
                </p>
              </div>
              <div class="col-xs-6">
                <p>
                  {% if val.email %}
                    {{val.email|safe}}
                  <br>
                  {% endif %}
                  {% if val.website %}
                    {{val.website|safe}}
                  {% endif %}
                </p>
              </div>
            </div>
            {% if val.notes %}
            <div class="row del-note">
              <p class="text-center">Note...</p>
              <p>{{val.notes|safe}}</p>
            </div>
            {% endif %}
          </div>
          {% endif %}
        {% endfor %}
        <!-- </tbody>
      </table> -->
    </section>
  </article>

{% endblock %}
